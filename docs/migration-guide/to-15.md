# Migrating to 15.0.0

This release contains significant or breaking changes.

## Significant changes

Two significant changes may affect you:

- deprecated stylistic rules
- added the `declaration-property-value-no-unknown` rule

### Deprecated stylistic rules

We've deprecated [76 of the rules that enforce stylistic conventions](#list-of-deprecated-rules), e.g. `indentation`.

When we created these rules, pretty printers (like [Prettier](https://prettier.io/)) didn't exist. They now offer a better way to consistently format code, especially whitespace. Linters and pretty printers are complementary tools that work together to help you write consistent and error-free code.

By deprecating these rules, we can:

- focus on writing and maintaining rules that help you [avoid errors](../user-guide/rules.md#avoid-errors) and [enforce (non-stylistic) conventions](../user-guide/rules.md#enforce-conventions), both of which are unique to Stylelint
- modernize our codebase, e.g. move to ESM so that we can update our dependencies and keep Stylelint secure for you

The [deprecated rules](#list-of-deprecated-rules) will still work in this release (with a deprecation warning). In preparation for the next major release, when we'll remove the rules from Stylelint, we suggest:

- extending the [standard config](https://www.npmjs.com/package/stylelint-config-standard) in your configuration object, if you don't already
- removing the deprecated rules from your configuration object

You can [extend](../user-guide/configure.md#extends) the [standard config](https://www.npmjs.com/package/stylelint-config-standard) using:

```diff json
{
+ "extends": ["stylelint-config-standard"],
  "rules": { .. }
}
```

Additionally, you may no longer need to extend [Prettier's Stylelint config](https://www.npmjs.com/package/stylelint-config-prettier) as there should be no conflicting rules:

```diff json
{
- "extends": ["stylelint-config-prettier"],
  "rules": { .. }
}
```

We've removed the [deprecated rules](#list-of-deprecated-rules) from the latest version of the [standard config](https://www.npmjs.com/package/stylelint-config-standard). It still helps you write consistent CSS by turning on many of the [other rules that enforce conventions](../user-guide/rules.md#enforce-conventions), e.g. most of the [`*-notation`](../user-guide/rules.md#notation), [`*-pattern`](../user-guide/rules.md#pattern) and [`*-quotes`](../user-guide/rules.md#quotes) rules.

There are lots of other rules we don't turn on in the [standard config](https://www.npmjs.com/package/stylelint-config-standard) and you can learn more about using them to customize Stylelint to your exact needs in our [new guide](../user-guide/customize.md).

Alternatively, you can continue to enforce stylistic consistency with Stylelint by using one of the community plugins that have migrated the deprecated rules:

- [stylelint-stylistic](https://www.npmjs.com/package/stylelint-stylistic)
- [stylelint-codeguide](https://www.npmjs.com/package/stylelint-codeguide)

### Added `declaration-property-value-no-unknown` rule

We added the [`declaration-property-value-no-unknown`](../../lib/rules/declaration-property-value-no-unknown/README.md) rule. It will flag property-value pairs that are unknown in the CSS specifications, for example:

```css
a {
  top: red;
}
```

The `top` property accepts either a `<length>`, `<percentage>` or the `auto` keyword. The rule will flag `red` as it's a `<color>`.

Many of you have requested this rule, and we plan to add more like it to help you [avoid errors](../user-guide/rules.md#avoid-errors) in your CSS.

To turn it on in your configuration object:

```diff json
{
  "extends": ["stylelint-config-standard"],
  "rules": {
+   "declaration-property-value-no-unknown": true
    ..
   }
}
```

The rule uses [CSSTree](https://github.com/csstree/csstree) and its [syntax dictionary](https://csstree.github.io/docs/syntax/) of 600+ properties, 350+ types and 100+ functions. You can help identify and plug any gaps in its dictionary by either updating [mdn-data](https://github.com/mdn/data/) or [CSSTree's patch file](https://github.com/csstree/csstree/blob/master/data/patch.json).

If you use values that aren't in the CSS specifications, you can use the rule's secondary options to make the rule more permissive. You can either:

- ignore properties or values outright
- extend the properties and values syntaxes

The latter ensures only specific exceptions are allowed.

If you currently use the [`stylelint-csstree-validator`](https://www.npmjs.com/package/stylelint-csstree-validator) plugin, you can continue to use it alongside the new rule by limiting the plugin to check only at-rule names and preludes.

```diff json
{
  "rules": {
    "csstree/validator": [true, {
+      "ignoreProperties": ["/.+/"]
    }]
  }
}
```

## Breaking changes

Three breaking changes may also affect you:

- removed `processors` configuration property
- removed support for Node.js 12
- changed `overrides.extends` behavior

### Removed `processors` configuration property

Processors were our first attempt to support containers of CSS, e.g. Markdown, HTML and CSS-in-JS. We later introduced [custom syntaxes](../developer-guide/syntaxes.md) to fix some of the shortcomings of processors, e.g. incompatibility with the [`--fix` option](../user-guide/options.md#fix).

We've also deprecated the [`postcss-css-in-js`](https://www.npmjs.com/package/@stylelint/postcss-css-in-js) custom syntax. It was not possible to maintain a monolithic custom syntax that attempted to support every CSS-in-JS library and syntax, as there are so many of them and each with variations in syntax.

You should remove the `processors` property from your configuration object and use a library-specific or syntax-specific (e.g. template literals) [custom syntax](../user-guide/options.md#customsyntax) instead.

For example, if you use [styled-components](https://styled-components.com):

```diff json
{
- "processors": ["stylelint-processor-styled-components"],
+ "customSyntax": "postcss-styled-syntax",
  "rules": { .. }
}
```

Other custom syntaxes include:

- [postcss-html](https://www.npmjs.com/package/postcss-html)
- [postcss-linaria](https://www.npmjs.com/package/@linaria/postcss-linaria)
- [postcss-lit](https://www.npmjs.com/package/postcss-lit)
- [postcss-markdown](https://www.npmjs.com/package/postcss-markdown)

You'll find a complete list of them in [Awesome Stylelint](https://github.com/stylelint/awesome-stylelint#readme).

If you create a new custom syntax, please [open a pull request](https://github.com/stylelint/awesome-stylelint/compare) to update [Awesome Stylelint](https://github.com/stylelint/awesome-stylelint#readme) so that others can find it. For example, [Stitches](https://stitches.dev/) and [vanilla-extract](https://vanilla-extract.style/) need syntaxes, which are object-based CSS-in-JS libraries.

### Removed support for Node.js 12

Node.js 12 has reached end-of-life. We've removed support for it so that we could update some of our dependencies. You should use the following or higher versions of Node.js:

- 14.13.1
- 16.0.0
- 18.0.0

### Changed `overrides.extends` behavior

To be consistent with the `overrides.plugins`, we've changed the behaviour of `overrides.extends` to merge rather than replace.

If you would like to keep the previous behavior, you should change your config to:

```diff json
{
- "extends": ["config-a"],
  "overrides": [
    {
      "files": ["*.module.css"],
      "extends": ["config-b"]
    },
+   {
+     "files": ["*.css"],
+     "extends": ["config-a"]
+   }
  ]
}
```

## List of Deprecated Rules

These rules are deprecated - we removed them in v16. We recommend you use a pretty printer (like Prettier) alongside Stylelint rather than these rules.

### Color

<!-- prettier-ignore-start -->

- `color-hex-case`: Specify lowercase or uppercase for hex colors.
<!-- prettier-ignore-end -->

### Function

<!-- prettier-ignore-start -->

- `function-comma-newline-after`: Require a newline or disallow whitespace after the commas of functions.
- `function-comma-newline-before`: Require a newline or disallow whitespace before the commas of functions.
- `function-comma-space-after`: Require a single space or disallow whitespace after the commas of functions.
- `function-comma-space-before`: Require a single space or disallow whitespace before the commas of functions.
- `function-max-empty-lines`: Limit the number of adjacent empty lines within functions.
- `function-parentheses-newline-inside`: Require a newline or disallow whitespace on the inside of the parentheses of functions.
- `function-parentheses-space-inside`: Require a single space or disallow whitespace on the inside of the parentheses of functions.
- `function-whitespace-after`: Require or disallow whitespace after functions.
<!-- prettier-ignore-end -->

### Number

<!-- prettier-ignore-start -->

- `number-leading-zero`: Require or disallow a leading zero for fractional numbers less than 1.
- `number-no-trailing-zeros`: Disallow trailing zeros in numbers.
<!-- prettier-ignore-end -->

### String

<!-- prettier-ignore-start -->

- `string-quotes`: Specify single or double quotes around strings.
<!-- prettier-ignore-end -->

### Unit

<!-- prettier-ignore-start -->

- `unit-case`: Specify lowercase or uppercase for units.
<!-- prettier-ignore-end -->

### Value list

<!-- prettier-ignore-start -->

- `value-list-comma-newline-after`: Require a newline or disallow whitespace after the commas of value lists.
- `value-list-comma-newline-before`: Require a newline or disallow whitespace before the commas of value lists.
- `value-list-comma-space-after`: Require a single space or disallow whitespace after the commas of value lists.
- `value-list-comma-space-before`: Require a single space or disallow whitespace before the commas of value lists.
- `value-list-max-empty-lines`: Limit the number of adjacent empty lines within value lists.
<!-- prettier-ignore-end -->

### Property

<!-- prettier-ignore-start -->

- `property-case`: Specify lowercase or uppercase for properties.
<!-- prettier-ignore-end -->

### Declaration

<!-- prettier-ignore-start -->

- `declaration-bang-space-after`: Require a single space or disallow whitespace after the bang of declarations.
- `declaration-bang-space-before`: Require a single space or disallow whitespace before the bang of declarations.
- `declaration-colon-newline-after`: Require a newline or disallow whitespace after the colon of declarations.
- `declaration-colon-space-after`: Require a single space or disallow whitespace after the colon of declarations.
- `declaration-colon-space-before`: Require a single space or disallow whitespace before the colon of declarations.
<!-- prettier-ignore-end -->

### Declaration block

<!-- prettier-ignore-start -->

- `declaration-block-semicolon-newline-after`: Require a newline or disallow whitespace after the semicolons of declaration blocks.
- `declaration-block-semicolon-newline-before`: Require a newline or disallow whitespace before the semicolons of declaration blocks.
- `declaration-block-semicolon-space-after`: Require a single space or disallow whitespace after the semicolons of declaration blocks.
- `declaration-block-semicolon-space-before`: Require a single space or disallow whitespace before the semicolons of declaration blocks.
- `declaration-block-trailing-semicolon`: Require or disallow a trailing semicolon within declaration blocks.
<!-- prettier-ignore-end -->

### Block

<!-- prettier-ignore-start -->

- `block-closing-brace-empty-line-before`: Require or disallow an empty line before the closing brace of blocks.
- `block-closing-brace-newline-after`: Require a newline or disallow whitespace after the closing brace of blocks.
- `block-closing-brace-newline-before`: Require a newline or disallow whitespace before the closing brace of blocks.
- `block-closing-brace-space-after`: Require a single space or disallow whitespace after the closing brace of blocks.
- `block-closing-brace-space-before`: Require a single space or disallow whitespace before the closing brace of blocks.
- `block-opening-brace-newline-after`: Require a newline after the opening brace of blocks.
- `block-opening-brace-newline-before`: Require a newline or disallow whitespace before the opening brace of blocks.
- `block-opening-brace-space-after`: Require a single space or disallow whitespace after the opening brace of blocks.
- `block-opening-brace-space-before`: Require a single space or disallow whitespace before the opening brace of blocks.
<!-- prettier-ignore-end -->

### Selector

<!-- prettier-ignore-start -->

- `selector-attribute-brackets-space-inside`: Require a single space or disallow whitespace on the inside of the brackets within attribute selectors.
- `selector-attribute-operator-space-after`: Require a single space or disallow whitespace after operators within attribute selectors.
- `selector-attribute-operator-space-before`: Require a single space or disallow whitespace before operators within attribute selectors.
- `selector-combinator-space-after`: Require a single space or disallow whitespace after the combinators of selectors.
- `selector-combinator-space-before`: Require a single space or disallow whitespace before the combinators of selectors.
- `selector-descendant-combinator-no-non-space`: Disallow non-space characters for descendant combinators of selectors.
- `selector-max-empty-lines`: Limit the number of adjacent empty lines within selectors.
- `selector-pseudo-class-case`: Specify lowercase or uppercase for pseudo-class selectors.
- `selector-pseudo-class-parentheses-space-inside`: Require a single space or disallow whitespace on the inside of the parentheses within pseudo-class selectors.
- `selector-pseudo-element-case`: Specify lowercase or uppercase for pseudo-element selectors.
<!-- prettier-ignore-end -->

### Selector list

<!-- prettier-ignore-start -->

- `selector-list-comma-newline-after`: Require a newline or disallow whitespace after the commas of selector lists.
- `selector-list-comma-newline-before`: Require a newline or disallow whitespace before the commas of selector lists.
- `selector-list-comma-space-after`: Require a single space or disallow whitespace after the commas of selector lists.
- `selector-list-comma-space-before`: Require a single space or disallow whitespace before the commas of selector lists.
<!-- prettier-ignore-end -->

### Media feature

<!-- prettier-ignore-start -->

- `media-feature-colon-space-after`: Require a single space or disallow whitespace after the colon in media features.
- `media-feature-colon-space-before`: Require a single space or disallow whitespace before the colon in media features.
- `media-feature-name-case`: Specify lowercase or uppercase for media feature names.
- `media-feature-parentheses-space-inside`: Require a single space or disallow whitespace on the inside of the parentheses within media features.
- `media-feature-range-operator-space-after`: Require a single space or disallow whitespace after the range operator in media features.
- `media-feature-range-operator-space-before`: Require a single space or disallow whitespace before the range operator in media features.
<!-- prettier-ignore-end -->

### Media query list

<!-- prettier-ignore-start -->

- `media-query-list-comma-newline-after`: Require a newline or disallow whitespace after the commas of media query lists.
- `media-query-list-comma-newline-before`: Require a newline or disallow whitespace before the commas of media query lists.
- `media-query-list-comma-space-after`: Require a single space or disallow whitespace after the commas of media query lists.
- `media-query-list-comma-space-before`: Require a single space or disallow whitespace before the commas of media query lists.
<!-- prettier-ignore-end -->

### At-rule

<!-- prettier-ignore-start -->

- `at-rule-name-case`: Specify lowercase or uppercase for at-rules names.
- `at-rule-name-newline-after`: Require a newline after at-rule names.
- `at-rule-name-space-after`: Require a single space after at-rule names.
- `at-rule-semicolon-newline-after`: Require a newline after the semicolon of at-rules.
- `at-rule-semicolon-space-before`: Require a single space or disallow whitespace before the semicolons of at-rules.
<!-- prettier-ignore-end -->

### General / Sheet

<!-- prettier-ignore-start -->

- `indentation`: Specify indentation.
- `linebreaks`: Specify unix or windows linebreaks.
- `max-empty-lines`: Limit the number of adjacent empty lines.
- `max-line-length`: Limit the length of a line.
- `no-empty-first-line`: Disallow empty first lines.
- `no-eol-whitespace`: Disallow end-of-line whitespace.
- `no-extra-semicolons`: Disallow extra semicolons.
- `no-missing-end-of-source-newline`: Disallow missing end-of-source newlines.
- `unicode-bom`: Require or disallow Unicode BOM.
<!-- prettier-ignore-end -->
